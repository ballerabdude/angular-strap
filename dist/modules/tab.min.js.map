{"version":3,"sources":["modules/tab.js"],"names":["angular","controller","provider","$scope","$element","defaults","this","self","$options","forEach","navClass","activeClass","$activeClass","$panes","$activePaneChangeListeners","endPaneKeep","key","$push","isDefined","pane","$setActive","name","length","keepEnd","$active","splice","index","active","activeIndex","$remove","indexOf","map","value","fn","$pane","$get","$tab","scope","require","transclude","directive","templateUrl","attr","template","link","postLink","ngModelCtrl","bsTabsCtrl","$setViewValue","$formatters","push","attrs","modelValue","bsActivePane","parsedBsActivePane","assign","$parse","$watch","newValue","oldValue","addClass","$window","$animate","$sce","title","trustAsHtml","element","controllers","render","$isActive","animation","$observe","disabled"],"mappings":"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","file":"modules/tab.min.js","sourcesContent":["'use strict';\n\nangular.module('mgcrea.ngStrap.tab', [])\n\n  .provider('$tab', function() {\n\n    var defaults = this.defaults = {\n      animation: 'am-fade',\n      template: 'tab/tab.tpl.html',\n      navClass: 'nav-tabs',\n      activeClass: 'active'\n    };\n\n    var controller = this.controller = function($scope, $element, $attrs) {\n      var self = this;\n\n      // Attributes options\n      self.$options = angular.copy(defaults);\n      angular.forEach(['animation', 'navClass', 'activeClass'], function(key) {\n        if(angular.isDefined($attrs[key])) self.$options[key] = $attrs[key];\n      });\n\n      // Publish options on scope\n      $scope.$navClass = self.$options.navClass;\n      $scope.$activeClass = self.$options.activeClass;\n\n      self.$panes = $scope.$panes = [];\n\n      // Please use $activePaneChangeListeners if you use `bsActivePane`\n      // Because we removed `ngModel` as default, we rename viewChangeListeners to\n      // activePaneChangeListeners to make more sense.\n      self.$activePaneChangeListeners = self.$viewChangeListeners = [];\n\n      // Are we keeping a pane at the end\n      self.endPaneKeep = false;\n\n      self.$push = function(pane) {\n        if(angular.isUndefined(self.$panes.$active)) {\n          $scope.$setActive(pane.name || 0);\n        }\n        // If we are keeping a pane at the end insert new pane before last index\n        if (self.endPaneKeep) {\n          self.$panes.splice(self.$panes.length -1, 0, pane);\n        } else {\n          // add to pane array\n          self.$panes.push(pane);\n          // If keeping at end save the index\n          if (pane.keepEnd) {\n            self.endPaneKeep = true;\n          }\n        }\n      };\n\n      self.$remove = function(pane) {\n        var index = self.$panes.indexOf(pane);\n        var active = self.$panes.$active;\n        var activeIndex;\n        if(angular.isString(active)) {\n          activeIndex = self.$panes.map(function(pane) {\n            return pane.name;\n          }).indexOf(active);\n        } else {\n          activeIndex = self.$panes.$active;\n        }\n\n        // remove pane from $panes array\n        self.$panes.splice(index, 1);\n\n        if (index < activeIndex) {\n          // we removed a pane before the active pane, so we need to\n          // decrement the active pane index\n          activeIndex--;\n        }\n        else if (index === activeIndex && activeIndex === self.$panes.length) {\n          // we remove the active pane and it was the one at the end,\n          // so select the previous one\n          activeIndex--;\n        }\n        if(activeIndex >= 0 && activeIndex < self.$panes.length) {\n          self.$setActive(self.$panes[activeIndex].name || activeIndex);\n        } else {\n          self.$setActive();\n        }\n      };\n\n      self.$setActive = $scope.$setActive = function(value) {\n        self.$panes.$active = value;\n        self.$activePaneChangeListeners.forEach(function(fn) {\n          fn();\n        });\n      };\n\n      self.$isActive = $scope.$isActive = function($pane, $index) {\n        return self.$panes.$active === $pane.name || self.$panes.$active === $index;\n      };\n\n    };\n\n    this.$get = function() {\n      var $tab = {};\n      $tab.defaults = defaults;\n      $tab.controller = controller;\n      return $tab;\n    };\n\n  })\n\n  .directive('bsTabs', function($window, $animate, $tab, $parse) {\n\n    var defaults = $tab.defaults;\n\n    return {\n      require: ['?ngModel', 'bsTabs'],\n      transclude: true,\n      scope: true,\n      controller: ['$scope', '$element', '$attrs', $tab.controller],\n      templateUrl: function(element, attr) {\n        return attr.template || defaults.template;\n      },\n      link: function postLink(scope, element, attrs, controllers) {\n\n        var ngModelCtrl = controllers[0];\n        var bsTabsCtrl = controllers[1];\n\n        // 'ngModel' does interfere with form validation\n        // and status, use `bsActivePane` instead to avoid it\n        if(ngModelCtrl) {\n\n          // Update the modelValue following\n          bsTabsCtrl.$activePaneChangeListeners.push(function() {\n            ngModelCtrl.$setViewValue(bsTabsCtrl.$panes.$active);\n          });\n\n          // modelValue -> $formatters -> viewValue\n          ngModelCtrl.$formatters.push(function(modelValue) {\n            // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\n            bsTabsCtrl.$setActive(modelValue);\n            return modelValue;\n          });\n\n        }\n\n        if (attrs.bsActivePane) {\n          // adapted from angularjs ngModelController bindings\n          // https://github.com/angular/angular.js/blob/v1.3.1/src%2Fng%2Fdirective%2Finput.js#L1730\n          var parsedBsActivePane = $parse(attrs.bsActivePane);\n\n          // Update bsActivePane value with change\n          bsTabsCtrl.$activePaneChangeListeners.push(function() {\n            parsedBsActivePane.assign(scope, bsTabsCtrl.$panes.$active);\n          });\n\n          // watch bsActivePane for value changes\n          scope.$watch(attrs.bsActivePane, function(newValue, oldValue) {\n            bsTabsCtrl.$setActive(newValue);\n          }, true);\n        }\n      }\n    };\n\n  })\n\n  .directive('bsPane', function($window, $animate, $sce) {\n\n    return {\n      require: ['^?ngModel', '^bsTabs'],\n      scope: true,\n      link: function postLink(scope, element, attrs, controllers) {\n\n        var ngModelCtrl = controllers[0];\n        var bsTabsCtrl = controllers[1];\n\n        // Add base class\n        element.addClass('tab-pane');\n\n        // Observe title attribute for change\n        attrs.$observe('title', function(newValue, oldValue) {\n          scope.title = $sce.trustAsHtml(newValue);\n        });\n\n        // If pane has keepEnd we will set it in the scope\n        if (attrs.keepEnd) {\n          scope.keepEnd = true;\n        }\n\n        // Save tab name into scope\n        scope.name = attrs.name;\n\n        // Add animation class\n        if(bsTabsCtrl.$options.animation) {\n          element.addClass(bsTabsCtrl.$options.animation);\n        }\n\n        attrs.$observe('disabled', function(newValue, oldValue) {\n          scope.disabled = scope.$eval(newValue);\n        });\n\n        // Push pane to parent bsTabs controller\n        bsTabsCtrl.$push(scope);\n\n        // remove pane from tab controller when pane is destroyed\n        scope.$on('$destroy', function() {\n          bsTabsCtrl.$remove(scope);\n        });\n\n        function render() {\n          var index = bsTabsCtrl.$panes.indexOf(scope);\n          $animate[bsTabsCtrl.$isActive(scope, index) ? 'addClass' : 'removeClass'](element, bsTabsCtrl.$options.activeClass);\n        }\n\n        bsTabsCtrl.$activePaneChangeListeners.push(function() {\n          render();\n        });\n        render();\n\n      }\n    };\n\n  });\n"],"sourceRoot":"/source/"}